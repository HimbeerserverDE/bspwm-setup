#! /bin/bash

bspc wm -l ~/.config/bspwm/intro.canvas
~/.config/bspwm/intro.rules

WINIT_X11_SCALE_FACTOR=1.0 alacritty -e musikbox -e -p ~/.wmintro_audio &
while [ -z "$(pgrep -x musikbox)" ]; do sleep 0.1; done

WINIT_X11_SCALE_FACTOR=1.0 alacritty -e sh -c 'cava | lolcat' &
while [ -z "$(pgrep -x cava)" ]; do sleep 0.1; done

WINIT_X11_SCALE_FACTOR=1.0 alacritty -e slw &
while [ -z "$(pgrep -x slw)" ]; do sleep 0.1; done

WINIT_X11_SCALE_FACTOR=1.0 alacritty -e neo-matrix -D &
while [ -z "$(pgrep -x neo-matrix)" ]; do sleep 0.1; done

WINIT_X11_SCALE_FACTOR=1.0 alacritty -e tty-clock -srDB &
while [ -z "$(pgrep -x tty-clock)" ]; do sleep 0.1; done

while [ -n "$(pgrep -x musikbox)" ]; do sleep 1; done

bspc rule -r *
killall alacritty
